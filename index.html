<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Days Coffee - Pre-Order GSheet Edition (Ultimate)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;900&display=swap" rel="stylesheet">
    <!-- Import Three.js Library untuk Animasi Partikel 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --gold: #D4AF37; /* Classic Gold */
            --black: #050505;
            --dark-gray: #1a1a1a;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--black);
            color: white;
            overflow-x: hidden;
            /* Latar belakang dinamis dengan gradient halus */
            background: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #050505 70%);
        }
        
        /* Kanvas Three.js akan diletakkan di belakang semua konten */
        #bg-3d {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3; /* Paling belakang untuk partikel dinamis */
            opacity: 0.8; 
        }

        /* --- Text & Main Animations --- */
        .text-gold-gradient {
            background: linear-gradient(to bottom, #F3E5AB, #D4AF37);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            text-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .glow-text { text-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-enter { animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; }
        .delay-100 { animation-delay: 0.1s; } .delay-200 { animation-delay: 0.2s; } .delay-300 { animation-delay: 0.3s; }
        
        /* --- Modal Styling --- */
        .modal-content {
            background-color: var(--dark-gray);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9);
        }
        .input-gold {
            background-color: #222; border: 1px solid #444; color: white;
        }
        .input-gold:focus {
            border-color: var(--gold); box-shadow: 0 0 0 1px var(--gold); outline: none;
        }

        /* --- Floating Coffee Beans Animations --- */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        @keyframes floatReverse {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(15px) rotate(-5deg); }
        }

        .floating-element {
            position: absolute;
            pointer-events: none;
            z-index: -2; 
            fill: var(--gold);
            opacity: 0.05; 
        }

        .bean-1 { top: 10%; left: 5%; width: 150px; height: 150px; filter: blur(4px); animation: float 8s ease-in-out infinite; }
        .bean-2 { bottom: 15%; right: 5%; width: 200px; height: 200px; filter: blur(8px); opacity: 0.03; animation: floatReverse 12s ease-in-out infinite; }
        .bean-3 { top: 40%; right: 15%; width: 60px; height: 60px; opacity: 0.08; animation: float 15s ease-in-out infinite; }
        .bean-4 { bottom: 30%; left: 15%; width: 80px; height: 80px; opacity: 0.06; filter: blur(1px); animation: floatReverse 10s ease-in-out infinite; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center justify-center px-4 sm:px-6 relative overflow-hidden">

    <!-- 1. 3D Canvas Container -->
    <div id="bg-3d"></div>

    <!-- 2. Decorative Floating Coffee Beans (SVG) -->
    <svg class="floating-element bean-1" viewBox="0 0 24 24">
        <path d="M12,22c4.97,0,9-4.03,9-9c0-4.97-9-13-9-13S3,8.03,3,13C3,17.97,7.03,22,12,22z M11.5,8.5 c0,0,1.5,2.5,1.5,4.5c0,2-2.5,4.5-2.5,4.5"/>
    </svg>
    <svg class="floating-element bean-2" viewBox="0 0 24 24">
        <path d="M12,2C7.03,2,3,6.03,3,11c0,4.97,9,13,9,13s9-8.03,9-13C21,6.03,16.97,2,12,2z M12.5,15.5 c0,0-1.5-2.5-1.5-4.5c0-2,2.5-4.5,2.5-4.5"/>
    </svg>
    <svg class="floating-element bean-3" viewBox="0 0 24 24">
        <path d="M19.89,10.75c-0.76-2.66-2.86-5.89-5.58-8.32C14.08,2.22,13.36,3.6,12.23,5c-2.4,2.98-2.74,4.02-2.01,6.08 c0.61,1.74,2.53,3.73,4.49,3.22c1.83-0.48,2.8-3.52,2.11-5.71C16.6,8.19,16.36,7.85,16.1,7.58c2.19,2.09,3.83,4.63,4.42,6.7 c0.92,3.22-0.93,6.49-4.14,7.41c-3.22,0.92-6.59-0.88-7.51-4.11C8.6,16.67,8.78,15.75,9.12,15c-0.65-0.27-1.34-0.46-2.05-0.54 c-0.5-0.06-1.01-0.04-1.51,0.06C4.83,15.6,4.6,16.86,5,18.26c1.22,4.29,5.72,6.7,10.01,5.47S21.11,15.03,19.89,10.75z"/>
    </svg>
    <svg class="floating-element bean-4" viewBox="0 0 24 24">
        <path d="M12,22c4.97,0,9-4.03,9-9c0-4.97-9-13-9-13S3,8.03,3,13C3,17.97,7.03,22,12,22z M11.5,8.5 c0,0,1.5,2.5,1.5,4.5c0,2-2.5,4.5-2.5,4.5"/>
    </svg>
    
    <!-- Kontainer Utama -->
    <main class="w-full max-w-5xl mx-auto text-center z-10 py-12 sm:py-20 relative">

        <!-- Header Section -->
        <div class="animate-enter">
            <h1 class="text-[3.5rem] leading-none sm:text-8xl md:text-9xl lg:text-[10rem] font-black tracking-tighter mb-2 text-gold-gradient uppercase select-none">
                Days Coffee
            </h1>
            <p class="text-sm sm:text-lg md:text-xl text-gray-400 tracking-[0.2em] uppercase font-medium mb-12 sm:mb-20 flex items-center justify-center gap-3">
                <span class="h-px w-8 bg-gray-700"></span>
                Experience The Finest &bull; Bazaar IGS
                <span class="h-px w-8 bg-gray-700"></span>
            </p>
        </div>

        <!-- Countdown Section -->
        <div class="animate-enter delay-100 mb-16 sm:mb-24">
            <div class="grid grid-cols-4 gap-2 sm:gap-8 max-w-4xl mx-auto" id="countdown">
                <div class="flex flex-col items-center p-4 transition-transform duration-300 hover:-translate-y-1"><span id="days" class="text-3xl sm:text-7xl font-bold text-white glow-text tabular-nums">00</span><span class="text-[10px] sm:text-sm text-gray-500 uppercase tracking-widest mt-2">Hari</span></div>
                <div class="flex flex-col items-center p-4 transition-transform duration-300 hover:-translate-y-1"><span id="hours" class="text-3xl sm:text-7xl font-bold text-white glow-text tabular-nums">00</span><span class="text-[10px] sm:text-sm text-gray-500 uppercase tracking-widest mt-2">Jam</span></div>
                <div class="flex flex-col items-center p-4 transition-transform duration-300 hover:-translate-y-1"><span id="minutes" class="text-3xl sm:text-7xl font-bold text-white glow-text tabular-nums">00</span><span class="text-[10px] sm:text-sm text-gray-500 uppercase tracking-widest mt-2">Menit</span></div>
                <div class="flex flex-col items-center p-4 transition-transform duration-300 hover:-translate-y-1"><span id="seconds" class="text-3xl sm:text-7xl font-bold text-[#D4AF37] glow-text tabular-nums">00</span><span class="text-[10px] sm:text-sm text-gray-500 uppercase tracking-widest mt-2">Detik</span></div>
            </div>
            <div id="message" class="hidden mt-10">
                <span class="text-2xl sm:text-4xl font-bold text-[#D4AF37]">WE ARE OPEN!</span>
            </div>
        </div>

        <!-- Call to Action / Social & Pre-Order -->
        <div class="animate-enter delay-200 relative">
            
            <div class="flex items-center justify-center gap-4 mb-8 opacity-50">
                <div class="w-12 h-px bg-gradient-to-r from-transparent to-[#D4AF37]"></div>
                <!-- Ikon Kopi -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#D4AF37" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>
                </svg>
                <div class="w-12 h-px bg-gradient-to-l from-transparent to-[#D4AF37]"></div>
            </div>

            <p class="text-gray-400 text-sm sm:text-base mb-8 italic font-light">
                Jadilah yang pertama merasakan kenikmatannya dan dapatkan penawaran eksklusif!
            </p>
            
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <!-- Tombol 1: Pre-Order -->
                <button 
                    id="preOrderBtn"
                    onclick="showModal()"
                    class="group relative inline-flex items-center justify-center px-8 py-4 sm:px-10 sm:py-4 overflow-hidden font-bold text-white transition-all duration-300 bg-[#D4AF37] border border-[#D4AF37] rounded-full hover:bg-[#AA8C2C] hover:shadow-[0_0_40px_rgba(212,175,55,0.4)] focus:outline-none text-sm sm:text-base"
                >
                    <span class="relative flex items-center gap-3 text-black">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><path d="M9 9h.01"></path><path d="M15 9h.01"></path></svg>
                        PRE-ORDER SEKARANG
                    </span>
                </button>

                <!-- Tombol 2: Instagram -->
                <a 
                    href="https://www.instagram.com/dayscoffee.id/?utm_source=ig_web_button_share_sheet" 
                    target="_blank"
                    class="group relative inline-flex items-center justify-center px-8 py-4 sm:px-10 sm:py-4 overflow-hidden font-bold text-white transition-all duration-300 bg-transparent border border-[#D4AF37] rounded-full hover:bg-transparent hover:shadow-[0_0_40px_rgba(212,175,55,0.4)] focus:outline-none text-sm sm:text-base"
                >
                    <span class="relative flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-colors"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                        <span class="tracking-widest transition-colors">@DAYSCOFFEE.ID</span>
                    </span>
                </a>
            </div>
        </div>

    </main>

    <!-- Footer Simple -->
    <footer class="absolute bottom-4 sm:bottom-8 text-[10px] text-gray-600 uppercase tracking-widest animate-enter delay-300 w-full text-center">
        <span class="opacity-50">Est. 2025</span> &bull; <span class="text-[#D4AF37]">IGS Bazaar Project</span>
    </footer>


    <!-- --- PRE-ORDER MODAL --- -->
    <div id="preOrderModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 hidden transition-opacity duration-300 opacity-0">
        <div class="modal-content w-full max-w-md p-6 sm:p-8 rounded-xl relative transform transition-transform duration-300 scale-95">
            
            <h3 class="text-2xl font-bold text-gold-gradient mb-2 uppercase tracking-wider">Pre-Order Eksklusif</h3>
            <p class="text-gray-400 text-sm mb-6">Daftar sekarang untuk memastikan Anda mendapatkan penawaran terbaik pada hari peluncuran.</p>
            
            <form id="preOrderForm" onsubmit="handlePreOrder(event)">
                <div class="mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-300 text-left mb-1">Nama Lengkap <span class="text-red-500">*wajib</span></label>
                    <input type="text" id="name" required class="w-full p-3 rounded-lg input-gold" placeholder="Nama Anda">
                </div>
                <div class="mb-4">
                    <label for="kelas" class="block text-sm font-medium text-gray-300 text-left mb-1">Kelas <span class="text-red-500">*wajib</span></label>
                    <input type="text" id="kelas" required class="w-full p-3 rounded-lg input-gold" placeholder="Contoh: 11-2">
                </div>
                <div class="mb-4">
                    <label for="email" class="block text-sm font-medium text-gray-300 text-left mb-1">Email (Opsional)</label>
                    <input type="email" id="email" class="w-full p-3 rounded-lg input-gold" placeholder="dayatganteng@gmail.com">
                </div>
                <div class="mb-6">
                    <label for="phone" class="block text-sm font-medium text-gray-300 text-left mb-1">Nomor HP/WhatsApp (Wajib)</label>
                    <input type="tel" id="phone" class="w-full p-3 rounded-lg input-gold" placeholder="+62 8xx xxxx xxxx">
                </div>

                <button 
                    type="submit" 
                    id="submitBtn"
                    class="w-full py-3 font-bold rounded-full bg-[#D4AF37] text-black hover:bg-[#AA8C2C] transition duration-200 disabled:opacity-50"
                >
                    Kirim Pendaftaran
                </button>

                <p id="formMessage" class="mt-4 text-sm font-medium"></p>
            </form>

            <!-- Close Button -->
            <button onclick="hideModal()" class="absolute top-3 right-3 text-gray-400 hover:text-gold transition">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
    </div>
    <!-- --- END MODAL --- -->

    <script type="module">
        // ====================================================================
        // !!! PENTING !!! 
        // URL WEB APP GOOGLE APPS SCRIPT ANDA SUDAH DIPERBARUI DI SINI:
        const GSHEET_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzh8cn3iJVFMzE10-hV-TmQrFi9NjI7h6m5rBXjmtZFTzFL9ahiY8G_rhIx1hlReF3r/exec'; 
        // ====================================================================

        // --- 3D PARTICLE EFFECT SETUP (Kode Three.js yang Sama) ---
        let scene, camera, renderer, particles;
        let container = document.getElementById('bg-3d');

        function initThreeJS() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0); 
            container.appendChild(renderer.domElement);

            const particleCount = 200;
            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];

            const particleColor = new THREE.Color(0xD4AF37); 

            for (let i = 0; i < particleCount; i++) {
                const x = (Math.random() - 0.5) * 20;
                const y = (Math.random() - 0.5) * 20;
                const z = (Math.random() - 0.5) * 20;
                positions.push(x, y, z);
                
                const color = particleColor.clone();
                color.offsetHSL(0, (Math.random() - 0.5) * 0.2, (Math.random() - 0.5) * 0.2); 
                colors.push(color.r, color.g, color.b);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({
                size: 0.05,
                vertexColors: true,
                transparent: true,
                opacity: 0.6,
                blending: THREE.AdditiveBlending 
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);
            
            window.addEventListener('resize', onWindowResize, false);
            document.addEventListener('mousemove', onDocumentMouseMove, false);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        let mouseX = 0, mouseY = 0;
        
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = - (event.clientY / window.innerHeight) * 2 + 1;
        }


        function animate() {
            requestAnimationFrame(animate);

            particles.rotation.x += 0.0005;
            particles.rotation.y += 0.001;
            
            camera.position.x += (mouseX * 0.1 - camera.position.x) * 0.05;
            camera.position.y += (mouseY * 0.1 - camera.position.y) * 0.05;
            camera.lookAt(scene.position); 

            renderer.render(scene, camera);
        }

        // --- Modal Functions ---
        window.showModal = () => {
            const modal = document.getElementById('preOrderModal');
            const content = modal.querySelector('.modal-content');
            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex', 'opacity-100');
            content.classList.remove('scale-95');
            content.classList.add('scale-100');
            document.body.style.overflow = 'hidden'; 
        };

        window.hideModal = () => {
            const modal = document.getElementById('preOrderModal');
            const content = modal.querySelector('.modal-content');
            content.classList.remove('scale-100');
            content.classList.add('scale-95');
            modal.classList.remove('opacity-100');
            modal.classList.add('opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = ''; 
            }, 300);
        };
        
        // --- Handle Form Submission to Google Sheet ---
        window.handlePreOrder = async (event) => {
            event.preventDefault();
            
            const form = document.getElementById('preOrderForm');
            const name = document.getElementById('name').value.trim();
            const kelas = document.getElementById('kelas').value.trim();
            const email = document.getElementById('email').value.trim() || 'N/A';
            const phone = document.getElementById('phone').value.trim() || 'N/A';
            
            const messageEl = document.getElementById('formMessage');
            const submitBtn = document.getElementById('submitBtn');

            messageEl.textContent = 'Memvertivikkasi data';
            messageEl.className = 'mt-4 text-sm font-medium text-gray-400';
            submitBtn.disabled = true;

            const dataToSend = {
                name: name,
                kelas: kelas,
                email: email,
                phone: phone,
                timestamp: new Date().toISOString() // Tambahkan timestamp dari sisi client untuk jaga-jaga
            };

            const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));
            let maxRetries = 3;

            for (let i = 0; i < maxRetries; i++) {
                try {
                    // Menggunakan fetch POST dengan JSON data
                    const response = await fetch(GSHEET_WEB_APP_URL, {
                        method: 'POST',
                        mode: 'no-cors', 
                        cache: 'no-cache',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(dataToSend)
                    });

                    // Karena menggunakan 'no-cors', kita hanya bisa berasumsi berhasil jika fetch tidak gagal secara network.
                    // Jika fetch berhasil (tidak ada error jaringan), kita anggap data terkirim.
                    messageEl.className = 'mt-4 text-sm font-medium text-gold-gradient';
                    messageEl.textContent = '✅ Pendaftaran berhasil dikirim! Kami akan segera menghubungi Anda.';
                    form.reset();
                    
                    setTimeout(() => {
                        hideModal();
                    }, 3000);
                    
                    return; 

                } catch (e) {
                    console.error(`Error submitting to Google Sheet (Attempt ${i + 1}): `, e);
                    if (i < maxRetries - 1) {
                        await delay(Math.pow(2, i) * 1000); 
                    } else {
                        messageEl.className = 'mt-4 text-sm font-medium text-red-500';
                        messageEl.textContent = '❌ Gagal mengirim data. Cek URL Apps Script dan koneksi internet.';
                    }
                }
            }
            submitBtn.disabled = false;
        };


        // --- Countdown Logic ---
        const targetDate = new Date("December 1, 2025 10:00:00").getTime();

        const countdownFunction = setInterval(function() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const pad = (num) => num < 10 ? '0' + num : num;

            const daysEl = document.getElementById("days");
            const hoursEl = document.getElementById("hours");
            const minutesEl = document.getElementById("minutes");
            const secondsEl = document.getElementById("seconds");
            const countdownSection = document.getElementById("countdown");
            const messageEl = document.getElementById("message");

            if(daysEl) daysEl.innerHTML = pad(days);
            if(hoursEl) hoursEl.innerHTML = pad(hours);
            if(minutesEl) minutesEl.innerHTML = pad(minutes);
            if(secondsEl) secondsEl.innerHTML = pad(seconds);

            if (distance < 0) {
                clearInterval(countdownFunction);
                if (countdownSection) countdownSection.style.display = 'none';
                if (messageEl) messageEl.classList.remove("hidden");
            } else {
                if (countdownSection) countdownSection.style.display = 'grid';
                if (messageEl) messageEl.classList.add("hidden");
            }
        }, 1000);
        
        window.onload = function () {
            initThreeJS();
            animate();
        }
    </script>
</body>
</html>
